{"ast":null,"code":"import _toConsumableArray from\"/Users/jeffreynaef/.config/yarn/global/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/jeffreynaef/.config/yarn/global/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/jeffreynaef/.config/yarn/global/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React from\"react\";import{lighten,makeStyles}from\"@material-ui/core/styles\";import clsx from\"clsx\";import AddIcon from\"@material-ui/icons/Add\";import{List,ListSubheader,ListItemText,ListItemIcon,ListItem,InputLabel,MenuItem,TextField,FormControl,Select,Checkbox,Toolbar,Typography,Tooltip,IconButton,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper}from\"@material-ui/core\";import Autocomplete from\"@material-ui/lab/Autocomplete\";import DeleteIcon from\"@material-ui/icons/Delete\";var useStyles=makeStyles(function(theme){return{table:{minWidth:theme.spacing(42)},formControl:{margin:theme.spacing(1),minWidth:theme.spacing(42)},selectEmpty:{marginTop:theme.spacing(2)}};});var attributes=[\"specversion\",\"datacontenttype\",\"dataschema\",\"source\",\"type\",\"subject\",\"time\"];var headCells=[{id:\"attr\",label:\"Name\"},{id:\"match\",label:\"Match\"},{id:\"value\",label:\"Value\"}];function EnhancedTableHead(props){var onSelectAllClick=props.onSelectAllClick,numSelected=props.numSelected,rowCount=props.rowCount;return/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{indeterminate:numSelected>0&&numSelected<rowCount,checked:rowCount>0&&numSelected===rowCount,onChange:onSelectAllClick,inputProps:{\"aria-label\":\"select all filters\"}})),headCells.map(function(headCell){return/*#__PURE__*/React.createElement(TableCell,{key:headCell.id},headCell.label);})));}var useToolbarStyles=makeStyles(function(theme){return{root:{paddingLeft:theme.spacing(0),paddingRight:theme.spacing(1)},highlight:theme.palette.type===\"light\"?{color:theme.palette.secondary.main,backgroundColor:lighten(theme.palette.secondary.light,0.85)}:{color:theme.palette.text.primary,backgroundColor:theme.palette.secondary.dark},title:{flex:\"1 1 100%\",paddingLeft:8}};});var EnhancedTableToolbar=function EnhancedTableToolbar(props){var classes=useToolbarStyles();var numSelected=props.numSelected;return/*#__PURE__*/React.createElement(Toolbar,{className:clsx(classes.root,_defineProperty({},classes.highlight,numSelected>0))},numSelected>0?/*#__PURE__*/React.createElement(Typography,{className:classes.title,color:\"inherit\",variant:\"subtitle1\",component:\"div\"},numSelected,\" selected\"):/*#__PURE__*/React.createElement(Typography,{className:classes.title,variant:\"h6\",id:\"tableTitle\",component:\"div\"},\"Filters\"),numSelected>0&&/*#__PURE__*/React.createElement(Tooltip,{title:\"Delete\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\",onClick:props.onDelete},/*#__PURE__*/React.createElement(DeleteIcon,null))));};export default function Filters(props){var classes=useStyles();var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),selected=_React$useState2[0],setSelected=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),filters=_React$useState4[0],setFilters=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),filterValue=_React$useState6[0],setFilterValue=_React$useState6[1];var _React$useState7=React.useState(3),_React$useState8=_slicedToArray(_React$useState7,2),filterMatch=_React$useState8[0],setFilterMatch=_React$useState8[1];var handleChange=function handleChange(event){setFilterMatch(event.target.value);};var handleAdd=function handleAdd(event){var match;switch(filterMatch){case 0:match=\"Exact\";break;case 1:match=\"Prefix\";break;case 2:match=\"Suffix\";break;case 3:default:match=\"Includes\";}var attr=inputValue;var val=filterValue;if(attr!==\"\"&&val!==\"\"){setFilters(function(og){var newFilters=[].concat(_toConsumableArray(og.filter(function(g){return g.key!==attr;})),[{key:attr,attr:attr,match:match,value:val}]);props.onChange(event,newFilters);return newFilters;});setFilterMatch(3);setValue(\"\");setInputValue(\"\");setFilterValue(\"\");}else{// TODO: add validation feedback.\n}};var isSelected=function isSelected(name){return selected.indexOf(name)!==-1;};var handleValChange=function handleValChange(event){setFilterValue(event.target.value);};var handleSelectAllClick=function handleSelectAllClick(event){if(event.target.checked){var newSelecteds=rows.map(function(n){return n.attr;});setSelected(newSelecteds);return;}setSelected([]);};var handleClick=function handleClick(event,name){var selectedIndex=selected.indexOf(name);var newSelected=[];if(selectedIndex===-1){newSelected=newSelected.concat(selected,name);}else if(selectedIndex===0){newSelected=newSelected.concat(selected.slice(1));}else if(selectedIndex===selected.length-1){newSelected=newSelected.concat(selected.slice(0,-1));}else if(selectedIndex>0){newSelected=newSelected.concat(selected.slice(0,selectedIndex),selected.slice(selectedIndex+1));}setSelected(newSelected);};var handleDelete=function handleDelete(event){var newFilters=filters.filter(function(f){return!isSelected(f.attr);});setFilters(newFilters);props.onChange(event,newFilters);setSelected([]);};var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),value=_React$useState10[0],setValue=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),inputValue=_React$useState12[0],setInputValue=_React$useState12[1];var rows=filters;return/*#__PURE__*/React.createElement(List,null,/*#__PURE__*/React.createElement(ListSubheader,null,/*#__PURE__*/React.createElement(EnhancedTableToolbar,{numSelected:selected.length,onDelete:handleDelete})),/*#__PURE__*/React.createElement(ListItem,null,filters.length>0&&/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:classes.table},/*#__PURE__*/React.createElement(EnhancedTableHead,{classes:classes,numSelected:selected.length,onSelectAllClick:handleSelectAllClick,rowCount:rows.length}),/*#__PURE__*/React.createElement(TableBody,null,rows.map(function(row,index){var isItemSelected=isSelected(row.attr);var labelId=\"enhanced-table-checkbox-\".concat(index);return/*#__PURE__*/React.createElement(TableRow,{hover:true,onClick:function onClick(event){return handleClick(event,row.attr);},role:\"checkbox\",\"aria-checked\":isItemSelected,tabIndex:-1,key:row.attr,selected:isItemSelected},/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{checked:isItemSelected,inputProps:{\"aria-labelledby\":labelId}})),/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},row.attr),/*#__PURE__*/React.createElement(TableCell,null,row.match),/*#__PURE__*/React.createElement(TableCell,null,row.value));}))))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(Autocomplete,{freeSolo:true,options:attributes,value:value,onChange:function onChange(event,newValue){setValue(newValue);},inputValue:inputValue,onInputChange:function onInputChange(event,newInputValue){setInputValue(newInputValue);},renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,Object.assign({id:\"input-filter-attribute\"},params,{label:\"Attribute\"})));}})),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"demo-simple-select-label\"},\"Match\"),/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:filterMatch,onChange:handleChange},/*#__PURE__*/React.createElement(MenuItem,{value:0},\"Exact\"),/*#__PURE__*/React.createElement(MenuItem,{value:1},\"Prefix\"),/*#__PURE__*/React.createElement(MenuItem,{value:2},\"Suffix\"),/*#__PURE__*/React.createElement(MenuItem,{value:3},\"Includes\")))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{id:\"input-filter-value\",label:\"Value\",value:filterValue,onChange:handleValChange,type:\"search\"}))),/*#__PURE__*/React.createElement(ListItem,{button:true,onClick:handleAdd},/*#__PURE__*/React.createElement(ListItemIcon,null,/*#__PURE__*/React.createElement(AddIcon,null)),/*#__PURE__*/React.createElement(ListItemText,{primary:\"Add Filter\"})),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:classes.table},/*#__PURE__*/React.createElement(EnhancedTableHead,{classes:classes,numSelected:selected.length,onSelectAllClick:handleSelectAllClick,rowCount:rows.length})))));}","map":{"version":3,"sources":["/Users/jeffreynaef/go/src/github.com/n3wscott/sockeye/frontend/src/Filters.js"],"names":["React","lighten","makeStyles","clsx","AddIcon","List","ListSubheader","ListItemText","ListItemIcon","ListItem","InputLabel","MenuItem","TextField","FormControl","Select","Checkbox","Toolbar","Typography","Tooltip","IconButton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Autocomplete","DeleteIcon","useStyles","theme","table","minWidth","spacing","formControl","margin","selectEmpty","marginTop","attributes","headCells","id","label","EnhancedTableHead","props","onSelectAllClick","numSelected","rowCount","map","headCell","useToolbarStyles","root","paddingLeft","paddingRight","highlight","palette","type","color","secondary","main","backgroundColor","light","text","primary","dark","title","flex","EnhancedTableToolbar","classes","onDelete","Filters","useState","selected","setSelected","filters","setFilters","filterValue","setFilterValue","filterMatch","setFilterMatch","handleChange","event","target","value","handleAdd","match","attr","inputValue","val","og","newFilters","filter","g","key","onChange","setValue","setInputValue","isSelected","name","indexOf","handleValChange","handleSelectAllClick","checked","newSelecteds","rows","n","handleClick","selectedIndex","newSelected","concat","slice","length","handleDelete","f","row","index","isItemSelected","labelId","newValue","newInputValue","params"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {\n  List,\n  ListSubheader,\n  ListItemText,\n  ListItemIcon,\n  ListItem,\n  InputLabel,\n  MenuItem,\n  TextField,\n  FormControl,\n  Select,\n  Checkbox,\n  Toolbar,\n  Typography,\n  Tooltip,\n  IconButton,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n} from \"@material-ui/core\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nconst useStyles = makeStyles((theme) => ({\n  table: {\n    minWidth: theme.spacing(42),\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: theme.spacing(42),\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst attributes = [\n  \"specversion\",\n  \"datacontenttype\",\n  \"dataschema\",\n  \"source\",\n  \"type\",\n  \"subject\",\n  \"time\",\n];\n\nconst headCells = [\n  { id: \"attr\", label: \"Name\" },\n  { id: \"match\", label: \"Match\" },\n  { id: \"value\", label: \"Value\" },\n];\n\nfunction EnhancedTableHead(props) {\n  const { onSelectAllClick, numSelected, rowCount } = props;\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\">\n          <Checkbox\n            indeterminate={numSelected > 0 && numSelected < rowCount}\n            checked={rowCount > 0 && numSelected === rowCount}\n            onChange={onSelectAllClick}\n            inputProps={{ \"aria-label\": \"select all filters\" }}\n          />\n        </TableCell>\n        {headCells.map((headCell) => (\n          <TableCell key={headCell.id}>{headCell.label}</TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(0),\n    paddingRight: theme.spacing(1),\n  },\n  highlight:\n    theme.palette.type === \"light\"\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark,\n        },\n  title: {\n    flex: \"1 1 100%\",\n    paddingLeft: 8,\n  },\n}));\n\nconst EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const { numSelected } = props;\n\n  return (\n    <Toolbar\n      className={clsx(classes.root, {\n        [classes.highlight]: numSelected > 0,\n      })}\n    >\n      {numSelected > 0 ? (\n        <Typography\n          className={classes.title}\n          color=\"inherit\"\n          variant=\"subtitle1\"\n          component=\"div\"\n        >\n          {numSelected} selected\n        </Typography>\n      ) : (\n        <Typography\n          className={classes.title}\n          variant=\"h6\"\n          id=\"tableTitle\"\n          component=\"div\"\n        >\n          Filters\n        </Typography>\n      )}\n\n      {numSelected > 0 && (\n        <Tooltip title=\"Delete\">\n          <IconButton aria-label=\"delete\" onClick={props.onDelete}>\n            <DeleteIcon />\n          </IconButton>\n        </Tooltip>\n      )}\n    </Toolbar>\n  );\n};\n\nEnhancedTableToolbar.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n};\n\nexport default function Filters(props) {\n  const classes = useStyles();\n\n  const [selected, setSelected] = React.useState([]);\n\n  const [filters, setFilters] = React.useState([]);\n\n  const [filterValue, setFilterValue] = React.useState(\"\");\n  const [filterMatch, setFilterMatch] = React.useState(3);\n\n  const handleChange = (event) => {\n    setFilterMatch(event.target.value);\n  };\n\n  const handleAdd = (event) => {\n    let match;\n    switch (filterMatch) {\n      case 0:\n        match = \"Exact\";\n        break;\n      case 1:\n        match = \"Prefix\";\n        break;\n      case 2:\n        match = \"Suffix\";\n        break;\n      case 3:\n      default:\n        match = \"Includes\";\n    }\n    let attr = inputValue;\n    let val = filterValue;\n    if (attr !== \"\" && val !== \"\") {\n      setFilters((og) => {\n        const newFilters = [\n          ...og.filter((g) => {\n            return g.key !== attr;\n          }),\n          { key: attr, attr: attr, match: match, value: val },\n        ];\n\n        props.onChange(event, newFilters);\n\n        return newFilters;\n      });\n\n      setFilterMatch(3);\n      setValue(\"\");\n      setInputValue(\"\");\n      setFilterValue(\"\");\n    } else {\n      // TODO: add validation feedback.\n    }\n  };\n\n  const isSelected = (name) => selected.indexOf(name) !== -1;\n\n  const handleValChange = (event) => {\n    setFilterValue(event.target.value);\n  };\n\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      const newSelecteds = rows.map((n) => n.attr);\n      setSelected(newSelecteds);\n      return;\n    }\n    setSelected([]);\n  };\n\n  const handleClick = (event, name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1)\n      );\n    }\n\n    setSelected(newSelected);\n  };\n\n  const handleDelete = (event) => {\n    let newFilters = filters.filter((f) => {\n      return !isSelected(f.attr);\n    });\n\n    setFilters(newFilters);\n    props.onChange(event, newFilters);\n\n    setSelected([]);\n  };\n\n  const [value, setValue] = React.useState(\"\");\n  const [inputValue, setInputValue] = React.useState(\"\");\n\n  const rows = filters;\n\n  return (\n    <List>\n      <ListSubheader>\n        <EnhancedTableToolbar\n          numSelected={selected.length}\n          onDelete={handleDelete}\n        />\n      </ListSubheader>\n      <ListItem>\n        {filters.length > 0 && (\n          <TableContainer component={Paper}>\n            <Table className={classes.table}>\n              <EnhancedTableHead\n                classes={classes}\n                numSelected={selected.length}\n                onSelectAllClick={handleSelectAllClick}\n                rowCount={rows.length}\n              />\n              <TableBody>\n                {rows.map((row, index) => {\n                  const isItemSelected = isSelected(row.attr);\n                  const labelId = `enhanced-table-checkbox-${index}`;\n\n                  return (\n                    <TableRow\n                      hover\n                      onClick={(event) => handleClick(event, row.attr)}\n                      role=\"checkbox\"\n                      aria-checked={isItemSelected}\n                      tabIndex={-1}\n                      key={row.attr}\n                      selected={isItemSelected}\n                    >\n                      <TableCell padding=\"checkbox\">\n                        <Checkbox\n                          checked={isItemSelected}\n                          inputProps={{ \"aria-labelledby\": labelId }}\n                        />\n                      </TableCell>\n                      <TableCell component=\"th\" scope=\"row\">\n                        {row.attr}\n                      </TableCell>\n                      <TableCell>{row.match}</TableCell>\n                      <TableCell>{row.value}</TableCell>\n                    </TableRow>\n                  );\n                })}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        )}\n      </ListItem>\n      <ListItem>\n        <Autocomplete\n          freeSolo\n          options={attributes}\n          value={value}\n          onChange={(event, newValue) => {\n            setValue(newValue);\n          }}\n          inputValue={inputValue}\n          onInputChange={(event, newInputValue) => {\n            setInputValue(newInputValue);\n          }}\n          renderInput={(params) => (\n            <FormControl className={classes.formControl}>\n              <TextField\n                id=\"input-filter-attribute\"\n                {...params}\n                label=\"Attribute\"\n              />\n            </FormControl>\n          )}\n        />\n      </ListItem>\n      <ListItem>\n        <FormControl className={classes.formControl}>\n          <InputLabel id=\"demo-simple-select-label\">Match</InputLabel>\n          <Select\n            labelId=\"demo-simple-select-label\"\n            id=\"demo-simple-select\"\n            value={filterMatch}\n            onChange={handleChange}\n          >\n            <MenuItem value={0}>Exact</MenuItem>\n            <MenuItem value={1}>Prefix</MenuItem>\n            <MenuItem value={2}>Suffix</MenuItem>\n            <MenuItem value={3}>Includes</MenuItem>\n          </Select>\n        </FormControl>\n      </ListItem>\n      <ListItem>\n        <FormControl className={classes.formControl}>\n          <TextField\n            id=\"input-filter-value\"\n            label=\"Value\"\n            value={filterValue}\n            onChange={handleValChange}\n            type=\"search\"\n          />\n        </FormControl>\n      </ListItem>\n      <ListItem button onClick={handleAdd}>\n        <ListItemIcon>\n          <AddIcon />\n        </ListItemIcon>\n        <ListItemText primary=\"Add Filter\" />\n      </ListItem>\n      <ListItem>\n        <TableContainer component={Paper}>\n          <Table className={classes.table}>\n            <EnhancedTableHead\n              classes={classes}\n              numSelected={selected.length}\n              onSelectAllClick={handleSelectAllClick}\n              rowCount={rows.length}\n            />\n          </Table>\n        </TableContainer>\n      </ListItem>\n    </List>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}